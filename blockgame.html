<!DOCTYPE html>
<html>
  <head>
    <style>
      html,
      body {
        overflow: hidden;
        height: 100%;
      }

      body {
        background-color: burlywood;
        margin: 0;
        padding: 0;
        position: relative;
        display: flex;
        flex-direction: column;
        height: 100vh;
        width: 100vw;
      }

      #player {
        width: 20px;
        height: 20px;
        background-color: lightgreen;
        position: absolute;
        outline: 2px solid;
        z-index: 1;
        border: 1px solid;
      }

      .wall {
        background-color: darkgray;
        position: absolute;
      }

      h1 {
        text-align: center;
        font-family: "Comic Sans MS";
        font-size: 48px;
        color: violet;
        -webkit-text-stroke: 3px black;
      }
    </style>
  </head>
  <body>
    <h1>block game</h1>
    <div id="player"></div>

    <div
      class="wall"
      style="width: 100vw; height: 20px; top: -15px; left: 0px"
    ></div>
    <div
      class="wall"
      style="width: 20px; height: 100vh; top: 0px; left: -15px"
    ></div>
    <div
      class="wall"
      style="width: 20px; height: 100vh; top: 0px; right: -15px"
    ></div>
    <div
      class="wall"
      style="width: 100vw; height: 20px; bottom: -15px; left: 0px"
    ></div>
    <script>
      const player = document.getElementById("player");
      let playerx = 5;
      let playery = 5;
      let movedist = 1;
      let moving = { w: false, a: false, s: false, d: false };
      const walls = document.querySelectorAll(".wall");

      function moveplayer() {
        let newplayerx = playerx;
        let newplayery = playery;

        if (moving.w) newplayery -= movedist;
        if (moving.a) newplayerx -= movedist;
        if (moving.s) newplayery += movedist;
        if (moving.d) newplayerx += movedist;

        let collision = false;
        walls.forEach((wall) => {
          const wallhitbox = wall.getBoundingClientRect();
          const playerhitbox = player.getBoundingClientRect();

          if (
            newplayerx + playerhitbox.width > wallhitbox.left &&
            newplayerx < wallhitbox.left + wallhitbox.width &&
            newplayery + playerhitbox.height > wallhitbox.top &&
            newplayery < wallhitbox.top + wallhitbox.height
          ) {
            collision = true; // Collision detected
          }
        });

        if (!collision) {
          playerx = newplayerx;
          playery = newplayery;
        }
        player.style.left = `${playerx}px`;
        player.style.top = `${playery}px`;
      }

      document.addEventListener("keydown", function (event) {
        if (event.key === "w") moving.w = true;
        if (event.key === "a") moving.a = true;
        if (event.key === "s") moving.s = true;
        if (event.key === "d") moving.d = true;
      });

      document.addEventListener("keyup", function (event) {
        if (event.key === "w") moving.w = false;
        if (event.key === "a") moving.a = false;
        if (event.key === "s") moving.s = false;
        if (event.key === "d") moving.d = false;
      });

      setInterval(moveplayer, 1);
    </script>
  </body>
</html>
